<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Workflow: SentiAnalyzer</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Workflow: SentiAnalyzer</h1>



<div id="sentiment-analysis-for-consumer-review" class="section level3">
<h3>Sentiment analysis for consumer review</h3>
<p>SentiAnalyzer is a “one-stop” solution for analysis of of consumer reviews which includes natural language processing (NLP) of consumer sentiments. The dataset that SentiAnalyzer can work with for now is short text and a binary quantification, e.g. whether consumer hits the like button. The NLP of the sentiment is analyzed through the options of algorithms to compile the words and the machinge learning training model of choice.</p>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p><code>install.packages(&quot;SentiAnalyzer&quot;)</code></p>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>Major steps of processing your textual dataset:</p>
<ol style="list-style-type: decimal">
<li><p>Balancing the dataset</p></li>
<li><p>Streamlining the text to get a sense of the major keywords</p></li>
<li><p>Train different classification algorithms(e.g., SVM,NB,RF,KNN,GBM) and choose best parameters for each one to get the highest possible classification accuracy for an specefic dataset</p></li>
<li><p>Choose the best trained classification algorithm for the specific dataset according to different measures (e.g., FScore, Recall, Precision, Accuracy)</p></li>
<li><p>Visualize the output of the confusion matrix, that is, the accuracy of the training model in predicting the sentiment of the consumer review</p></li>
</ol>
</div>
<div id="tackling-imbalanced-data" class="section level2">
<h2>Tackling imbalanced data</h2>
<p>The first step to process your data is to make sure that both of your variables have equal numbers of observations/unit. <code>BalanceData</code> function can be used to balance the called dataset. Using packages: <code>ROSE</code>, balance the columns of the data. For oversampled data, used <code>ovun.sample</code> to balance over or under sampled data. Then check the balance of the columns/variables.</p>
<p><code>BalanceData</code> will automatically save a balanced dataset saved in <code>/data</code> folder under name <code>data.rose.Rda</code></p>
<div id="importing-the-imbalance-dataset-optional" class="section level4">
<h4>Importing the imbalance dataset (OPTIONAL)</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(imbalance_data)
<span class="co">#&gt;                                                                                                            Review</span>
<span class="co">#&gt; 1                                                                                              Crust is not good.</span>
<span class="co">#&gt; 2                                                                       Not tasty and the texture was just nasty.</span>
<span class="co">#&gt; 3                                                                  Now I am getting angry and I want my damn pho.</span>
<span class="co">#&gt; 4                                                                           Honeslty it didn't taste THAT fresh.)</span>
<span class="co">#&gt; 5 The potatoes were like rubber and you could tell they had been made up ahead of time being kept under a warmer.</span>
<span class="co">#&gt; 6                                                                                              Would not go back.</span>
<span class="co">#&gt;   Liked</span>
<span class="co">#&gt; 1     0</span>
<span class="co">#&gt; 2     0</span>
<span class="co">#&gt; 3     0</span>
<span class="co">#&gt; 4     0</span>
<span class="co">#&gt; 5     0</span>
<span class="co">#&gt; 6     0</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">SentiAnalyzer<span class="op">::</span><span class="kw">BalanceData</span>(imbalance_data)</code></pre></div>
<p>check the balanced dataset, same number of rows and columns now</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(balanced_data)
<span class="kw">str</span>(balanced_data)
<span class="co">#&gt; [1] 1000    2</span>
<span class="co">#&gt; 'data.frame':    1000 obs. of  2 variables:</span>
<span class="co">#&gt;  $ Review: chr  &quot;Wow... Loved this place.&quot; &quot;Crust is not good.&quot; &quot;Not tasty and the texture was just nasty.&quot; &quot;Stopped by during the late May bank holiday off Rick Steve recommendation and loved it.&quot; ...</span>
<span class="co">#&gt;  $ Liked : int  1 0 0 1 1 0 0 0 1 1 ...</span></code></pre></div>
</div>
<div id="visualization" class="section level3">
<h3>Visualization</h3>
<p>Before we start any further major processing of data, we can quickly get an insight of the data through a word cloud visualization. Termcount is used for filtering the highest terms repeated in reviews, usually &gt; 10 count</p>
<p><strong>input</strong>: a balanced dataset of text and binary sentiment review, low baseline for term count</p>
<p><strong>output</strong>: wordcloud plot and frequency of words bar plot</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">VisualizeData</span>(balanced_data,<span class="dv">12</span>)</code></pre></div>
</div>
</div>
<div id="cleaning-the-text" class="section level2">
<h2>Cleaning the text</h2>
<p><strong>input</strong>: <code>CleanText()</code> calls for 3 arguments:</p>
<ol style="list-style-type: lower-alpha">
<li>the dataset</li>
<li>document term matrix structure of choice (choose 1 from 3)</li>
<li>reduction rate (range 0-1)</li>
</ol>
<p><strong>output</strong>: <code>CleanText()</code> returns a matrix <code>clean_dataset</code> saved as <code>data/clean_dataset.rda</code></p>
<p>packages used: <code>tm</code> and <code>SnowballC</code></p>
<div id="a.-text-mining-the-dataset" class="section level5">
<h5>a. text-mining the dataset</h5>
<p>integrating built-in functions from <code>tm</code>, <code>CleanText()</code> will “clean up” the words from the text and mine for the words that conveys a range sorts of sentiment and convert some formatting; this remains what is called as token (single) or corpus (all the tokens):</p>
<p><em>converts all text to lower case </em>remove numbers from the text <em>remove punctuations </em>remove stop words, e.g. “the”, “a”, “for”, “and”, etc <em>extract the stems of thegiven words using Porter’s stemming algorithmn </em>remove extra white spaces that was left off by the removed texts</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tm)</code></pre></div>
<pre><code>#&gt; [1] &quot;wow love place&quot;
#&gt; [1] &quot;crust good&quot;
#&gt; [1] &quot;tasti textur just nasti&quot;
#&gt; [1] &quot;stop late may bank holiday rick steve recommend love&quot;
#&gt; [1] &quot;select menu great price&quot;
#&gt; [1] &quot;now get angri want damn pho&quot;</code></pre>
</div>
<div id="b.-creating-the-document-term-matrixbag-of-words-model" class="section level5">
<h5>b. Creating the document-term matrix/bag of words model</h5>
<p>Next, still within the scope of the same current function, <code>Cleantext()</code>, the corpus is formatted to a <a href="#https://en.wikipedia.org/wiki/Document-term_matrix">document-term matrix</a> (DTM) and creating document term matrix of words in reviews. Essentially it creates a single column for every tokens in the corpus and counted for frequency of occurence on each tokens on the rows</p>
<p>user also have the choice to choose either (the argument call is also done on <code>CleanText</code>):</p>
<ol style="list-style-type: decimal">
<li>bag of words</li>
<li>tf-idf (term frequency-inverse document frequency)</li>
<li>Bi-gram</li>
</ol>
</div>
<div id="c.-choosing-the-reduction-rate" class="section level5">
<h5>c. choosing the reduction rate</h5>
<p>the document-term matrix will quickly expand the dataset dimension, especially the sparse terms, significantly. Depending on the dimension of the dataset can be adjusted be adjusted within the range 0 to 1. Essentially it is calling <code>tm::removeSparseTerms</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">clean_dataset &lt;-<span class="st"> </span>SentiAnalyzer<span class="op">::</span><span class="kw">CleanText</span>(balanced_data, <span class="dt">dtm_method=</span><span class="dv">1</span>, <span class="dt">reductionrate=</span><span class="fl">0.99</span>)</code></pre></div>
<p>example:</p>
<pre><code>#&gt; [1] 1000   97
#&gt;  [1] &quot;also&quot;       &quot;alway&quot;      &quot;amaz&quot;       &quot;atmospher&quot;  &quot;awesom&quot;    
#&gt;  [6] &quot;back&quot;       &quot;bad&quot;        &quot;best&quot;       &quot;better&quot;     &quot;bland&quot;     
#&gt; [11] &quot;buffet&quot;     &quot;burger&quot;     &quot;came&quot;       &quot;can&quot;        &quot;cant&quot;      
#&gt; [16] &quot;chicken&quot;    &quot;come&quot;       &quot;definit&quot;    &quot;delici&quot;     &quot;didnt&quot;     
#&gt; [21] &quot;disappoint&quot; &quot;dish&quot;       &quot;dont&quot;       &quot;eat&quot;        &quot;enjoy&quot;     
#&gt; [26] &quot;enough&quot;     &quot;even&quot;       &quot;ever&quot;       &quot;experi&quot;     &quot;fantast&quot;   
#&gt; [31] &quot;feel&quot;       &quot;first&quot;      &quot;flavor&quot;     &quot;food&quot;       &quot;fresh&quot;     
#&gt; [36] &quot;fri&quot;        &quot;friend&quot;     &quot;get&quot;        &quot;good&quot;       &quot;got&quot;       
#&gt; [41] &quot;great&quot;      &quot;ive&quot;        &quot;just&quot;       &quot;know&quot;       &quot;like&quot;      
#&gt; [46] &quot;love&quot;       &quot;made&quot;       &quot;manag&quot;      &quot;meal&quot;       &quot;menu&quot;      
#&gt;   also alway amaz atmospher awesom back bad best better bland
#&gt; 1    0     0    0         0      0    0   0    0      0     0
#&gt; 2    0     0    0         0      0    0   0    0      0     0
#&gt; 3    0     0    0         0      0    0   0    0      0     0
#&gt; 4    0     0    0         0      0    0   0    0      0     0
#&gt; 5    0     0    0         0      0    0   0    0      0     0
#&gt; 6    0     0    0         0      0    0   0    0      0     0
#&gt;      also alway amaz atmospher awesom back bad best better bland
#&gt; 995     0     0    0         0      0    0   0    0      0     0
#&gt; 996     0     0    0         0      0    0   0    0      0     0
#&gt; 997     0     0    0         0      0    0   0    0      0     0
#&gt; 998     0     0    0         0      0    1   0    0      0     0
#&gt; 999     0     0    0         0      0    0   0    0      0     0
#&gt; 1000    0     0    0         0      0    0   0    0      0     0</code></pre>
</div>
</div>
<div id="building-classification" class="section level2">
<h2>Building classification</h2>
<p>Train different classification algorithms(e.g., SVM,NB,RF,KNN,GBM) and choose best parameters for each one to get the highest possible classification accuracy for an specefic dataset</p>
<p><strong>input</strong>: document-term matrix (result from <code>CleanText()</code> which is <code>clean_dataset</code>)</p>
<p><strong>output</strong>: list of trained models with best parameters from 5 machine learning algorithms (GBM, KNN, NB, RF,SVM_Poly)</p>
<p><strong>Using cross validation for a valid testing accuracy</strong></p>
<p>using package <code>caret</code>, and <code>traincontrol</code></p>
<p>Using the whole dataset for training purpose and 10-fold cross validation for a valid estimate of testing accuracy.</p>
<div id="example-training-classifier-knn" class="section level3">
<h3>Example training classifier : KNN</h3>
<p>The model training consist of <code>expand.grid()</code>, <code>train()</code> (formula, data, method, train control, tuneGrid, etc)</p>
<p><strong>Training KNN with the best parameters using <code>caret</code> traning function.</strong> <img src="data:image/png;base64,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" /><!-- --></p>
<p>As shown in plot above it explores up to 100 neighbours for KNN algorithm and selects the best one for the trained KNN model</p>
<p>Example shown is for trained Gradient Boosting Machine trained model</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="kw">system.file</span>(<span class="dt">package =</span> <span class="st">&quot;SentiAnalyzer&quot;</span>, <span class="st">&quot;trained_models.RData&quot;</span>))
trained_models[<span class="dv">2</span>]</code></pre></div>
</div>
<div id="build-prediction" class="section level3">
<h3>Build Prediction</h3>
<p>classifies the target value of input data using different trained algorithms (output of <code>BuildTraining</code> function) and return a list of confusion matrices, these matrices can be used for any purposes. we intent to extract different measurements from it using <code>comparison</code> function. User can also put TermVector Matrice as input and this function, depending upon the type of the input automaticly runs <code>BuildTraining</code> function if needed. The goal here to have confuction matrix information as a list.</p>
<p><strong>input</strong>: document-term matrix (result from <code>CleanText()</code> which is <code>cleaned_dataset</code>) or list of trained models (output of <code>SentiAnalyzer::BuildTraining</code> Function)</p>
<p><strong>output</strong>: list of various parameter values of 5 machine learning algorithms (GBM, KNN, NB, RF,SVM_Poly) Here we used <code>BuilPrediction</code> for an already trained object that we load earlier (<code>trained_models</code>). As mentioned earlier the input can also be a cleaned TermVector matrix(output of <code>CleanText()</code> function)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_predicted &lt;-<span class="st"> </span>SentiAnalyzer<span class="op">::</span><span class="kw">BuildPrediction</span>(trained_models)</code></pre></div>
</div>
<div id="comparison-of-ml-training-models" class="section level3">
<h3>Comparison of ML training models</h3>
<p>This function extracts F1, Recall,Precision and Accuracy from confuction matrices list and returns a dataframe of those measurments.</p>
<p><strong>input</strong>: depending upon the type of the input, function runs appropriate needed functions. Input can be a document-term matrix (result from <code>CleanText()</code> functionwhich is <code>cleaned_dataset</code>) or a list (output of <code>BuildPrediction</code> function)</p>
<p><strong>output</strong>: list of confusion matrices of 5 machine learning algorithms</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Cmxx &lt;- SentiAnalyzer::comparison(df_predicted)</span>
<span class="co">#Cmxx</span></code></pre></div>
</div>
<div id="heatmap-and-table" class="section level3">
<h3>Heatmap and table</h3>
<p><strong>input</strong>: confusion matrix from <code>Comparison</code></p>
<p><strong>output</strong>: interactive plotly heat map and table</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
